# 🎬 EngReelGen: 영어 학습용 숏폼 자동 생성 서비스 가이드

이 문서는 AI 어시스턴트(Gemini Code Assist)가 **EngReelGen** 프로젝트를 이해하고, 개발 작업을 지원하기 위한 핵심 컨텍스트와 규칙을 정의합니다.

## 0. AI 어시스턴트 필수 규칙

> **⚠️ 중요: 모든 답변은 반드시 한국어로 작성해야 합니다.**

## 1. 프로젝트 개요 및 기술 스택

| 구분                  | 내용                                                                                                                             |
| :-------------------- | :------------------------------------------------------------------------------------------------------------------------------- |
| **서비스 목적**       | 입력된 날짜와 비디오 유형에 따라 다양한 형식(세로형/가로형)의 영어 학습용 숏폼(Reels/Shorts) 영상을 Go 언어로 자동 생성합니다.     |
| **애플리케이션 형태** | Go 언어로 작성된 **명령줄(CLI) 독립형 애플리케이션**이어야 합니다.                                                               |
| **최종 산출물**       | 이미지, 영어 오디오, 한국어 오디오를 조합하여 만든 단일 **`.mp4`** 파일.                                                         |
| **주요 기술**         | **주 언어:** Go (Golang) / **비디오 처리:** FFmpeg / **TTS:** Google Cloud TTS API 사용. |
| **코딩 스타일**       | [코딩 스타일 가이드](./.gemini/CODING_STYLE.md)                                                                                  |

## 2. 프로젝트 구조 및 패키지 규칙

프로젝트는 다음 패키지 구조를 **엄격히 준수**하며, 모든 비디오 생성 로직은 **Factory 패턴**을 통해 선택되어야 합니다.

- **`main.go`**: 애플리케이션 진입점. `config/config.yaml`에서 설정을 읽고 Factory 호출 담당.
- **`config/`**: DB 연결 설정, 환경 변수 로딩, YAML/JSON 설정 파일 처리.
- **`dto/`**: 데이터 전송 객체 (ContentData, VideoCreationRequest, TemplateConfig 등).
- **`entity/`**: 데이터베이스 엔터티 정의 (EnglishWord, EnglishIdiom, ShortSentence, LongformWord 등).
- **`enum/`**: 서비스 타입, 콘텐츠 타입, 플랫폼 등 열거형 정의.
- **`factory/`**: **Factory 패턴** 구현. 서비스 타입에 따라 적절한 서비스 구현체를 반환.
- **`repository/`**: DB 조회/저장 로직. 날짜 기반 콘텐츠 조회 기능 구현이 핵심.
- **`service/`**: 비즈니스 로직 포함.

## 3. 서비스 타입 (config.yaml의 type 설정값)

### 3.1. 인스타그램 릴스 (세로형 1080x1920)

| Type   | 설명                    | 속도 설정                |
| :----- | :---------------------- | :----------------------- |
| `iw`   | 인스타그램 영어 단어    | SpeakSpeed: 0.8 (느림)   |
| `ii`   | 인스타그램 영어 숙어    | SpeakSpeed: 0.8 (느림)   |
| `is`   | 인스타그램 영어 문장    | SpeakSpeed: 1.0 (기본)   |

### 3.2. 페이스북 릴스 (세로형 1080x1920)

| Type   | 설명                  | 속도 설정                |
| :----- | :-------------------- | :----------------------- |
| `fw`   | 페이스북 영어 단어    | SpeakSpeed: 0.8 (느림)   |
| `fi`   | 페이스북 영어 숙어    | SpeakSpeed: 0.8 (느림)   |
| `fs`   | 페이스북 영어 문장    | SpeakSpeed: 0.8 (느림)   |

### 3.3. 유튜브 쇼츠 (세로형 1080x1920)

| Type   | 설명                    | 속도 설정                |
| :----- | :---------------------- | :----------------------- |
| `ysw`  | 유튜브 쇼츠 영어 단어   | SpeakSpeed: 1.0 (기본)   |
| `ysi`  | 유튜브 쇼츠 영어 숙어   | SpeakSpeed: 1.0 (기본)   |
| `yss`  | 유튜브 쇼츠 영어 문장   | SpeakSpeed: 1.0 (기본)   |

### 3.4. 유튜브 롱폼 (가로형 1920x1080)

| Type    | 설명                  | 속도 설정                |
| :------ | :-------------------- | :----------------------- |
| `yl`    | 유튜브 롱폼 영어 단어 | SpeakSpeed: 0.8 (느림)   |

### 3.5. 기타

| Type    | 설명                              |
| :------ | :-------------------------------- |
| `start` | 시작 멘트 전용 비디오 (인트로)    |

## 4. 설정 파일 (config/config.yaml)

```yaml
video:
  type: "iw"        # 생성할 비디오 종류 (위 서비스 타입 참조)
  date: "20260110"  # 비디오 생성 기준 날짜 (YYYYMMDD 형식, "today" 입력 시 오늘 날짜 사용)
```

## 5. 비디오 애셋 생성 및 조립

1. **이미지 생성:** 템플릿 기반으로 텍스트(단어, 의미, 발음 등)를 오버레이하여 생성
2. **오디오 생성 (TTS):** Google Cloud TTS API를 사용하여 영어/한국어 오디오 생성
3. **클립 조립:** FFmpeg를 사용하여 이미지 + 오디오를 조합하여 클립 생성
4. **최종 병합:** 모든 클립을 하나의 MP4 파일로 병합

## 6. 최종 출력

- **최종 파일 이름:** `YYMMDD_<type>.mp4` 형식 (예: `260110_iw.mp4`)
- **임시 파일 정리:** 생성 완료 후 모든 임시 파일(이미지, 오디오, 중간 클립)은 자동 삭제
